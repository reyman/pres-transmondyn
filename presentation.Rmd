---
title: "Vers une recherche reproductible pour la simulation" 
author: " Robin Cura ; Sébastien Rey-Coyrehourcq"
date: "22/10/2014"
output:
  ioslides_presentation:
    highlight: pygments
    css: slides.css
runtime: shiny
font-import: http://fonts.googleapis.com/css?family=Ubuntu
font-family: Ubuntu
bibliography: /home/srey/TRAVAUX/THESE/REPOSITORY_GIT/presentations/transmondyn_28102014/transmondyn.bib
csl: /home/srey/TRAVAUX/THESE/REPOSITORY_GIT/presentations/transmondyn_28102014/annals-of-the-association-of-american-geographers.csl
widescreen: yes
---

[//]: <> (http://stackoverflow.com/questions/3311940/r-rjava-package-install-failing)

----

<q> Faire le point sur la réplication des modèles de simulations dans le contexte plus large <span class="red">des débats</span> et des outils proposés pour assurer une recherche reproductible</q>

# Débats publics

---- 

<div class="centered">

Pb #1 : Paywall <br/>

<img src="presentation-images/paywall.png"  style="height: 80%;"/>
</div>

---- 

<div class="centered">

L'affaire JSTOR (2011) <br/>

<img src="presentation-images/Obit-Swartz_Darg.jpg"  style="width: 80%;"/>
</div>

----

<div class="centered">
Pb #2 : Reproductibilité 


<!--- 
It should be clear that in order for Computer Science research to be reproducible, several hurdles
have to be cleared: <mark>the source code and test case data have to be available</mark>,  <mark>the code has to build</mark>,  <mark>the execution environment has to be replicated</mark>,  <mark>the code itself has to run to completion</mark>,  <mark>and accurate measurements [...] have to be collected.--->


<blockquote></mark> In this paper we concentrate on the two most basic of these requirements: <mark>is the source code available, and does it build? </mark> -- @Collberg2014 </blockquote>

<div class="centered">
<img src="presentation-images/computer_science_reproducibility.png"  style="width: 70%;"/>
</div>

----

<div class="centered">

Pb #3 : Scandales <br/>

</div>

# L'organisation collective d'une réponse

## Les pionniers (WWW)

<img src="presentation-images/bernardlee.jpg" style="width:300px"; class = "author"/>

<blockquote> [...] <mark>The project started with the philosophy that much academic information should be freely available to anyone.</mark> It aims to allow information sharing within internationally dispersed teams, and the dissemination of information by support groups. -- Tim Berners-Lee (1991) <br/><br/></blockquote>

## Les pionniers (Free software)

<img src="presentation-images/GNU_and_Stallman_2012.jpg" style="width:300px"; class = "author"/>

<blockquote><mark> Logiciel libre </mark> [free software] désigne des logiciels qui respectent la liberté des utilisateurs. En gros, cela veut dire que <mark>les utilisateurs ont la liberté d'exécuter, copier, distribuer, étudier, modifier et améliorer ces logiciels.</mark> Ainsi, « logiciel libre » fait référence à la liberté, pas au prix. Pour comprendre ce concept, vous devez penser à « liberté d'expression », pas à « entrée libre » -- Free Software Foundation 2014 </blockquote>

<img src="presentation-images/ericSRaymond.jpg" style="width:300px"; class = "author"/>

<blockquote> Open source software is software that can be freely used, changed, and shared (in modified or unmodified form) by anyone. Open source software is made by many people, and distributed under licenses that comply with the Open Source Definition. -- The Open Source Initiative 2014 </blockquote>

## Les pionniers (Open Data)

bla 

## Les pionniers (Open Access)

<img src="presentation-images/ginsparg_paul.jpg" style="width:300px"; class = "author"/>

<blockquote>In the fall of 1992, <mark>a colleague at CERN emailed me: ‘Q: do you know the worldwide-web program?’ I did not, but quickly installed WorldWideWeb.app, serendipitously written by Tim Berners-Lee for the same NeXT computer that I was using, and with whom I began to exchange emails </mark>-- Paul Ginsparg (2011) </blockquote>

<img src="presentation-images/arxiv.jpg" align="middle" style="width:400px"; class="author"/>
<blockquote>Arxiv history quotation-- Paul Ginsparg (2011) </blockquote>

## Les pionniers (Open Access)

<img src="presentation-images/boai.png" style="width:200px"; class = "author"/>

<blockquote> By <mark> “open access” </mark> to [peer-reviewed research literature], we mean <mark>its free availability on the public internet, permitting any users to read, download, copy, distribute, print, search, or link to the full texts of these articles, crawl them for indexing, pass them as data to software, or use them for any other lawful purpose, without financial, legal, or technical barriers other than those inseparable from gaining access to the internet itself.</mark> The only constraint on reproduction and distribution, and the only role for copyright in this domain, should be to give authors control over the integrity of their work and the right to be properly acknowledged and cited.</blockquote>

## Emergence de l'Open Science

<!---
- des définitions (open data, open access, etc.)
- des manifestes
- une multiplicité d'acteurs (institutions, journaux, chercheurs)
- une problématique à l'échelle mondiale
--->

<img src="presentation-images/openscience_pointofview.png"  style="width: 70%;"/>

# Remise à plat des termes

----

<q> Faire le point sur la réplication des modèles de simulations  dans le contexte plus large des débats et des outils proposés pour assurer <span class="red"> une recherche reproductible </span></q>

----

Reproducible research ? 

<div class="centered">
<img src="presentation-images/active_paper.png"  style="width: 50%;"/>
</div>

<blockquote> The term reproducible research refers to the idea that the ultimate product of academic research is the paper along with the full computational environment used to produce the results in the paper such as the code, data, etc. that can be used to reproduce the results and create new work based on the research. -- Wikipedia </blockquote>

<blockquote><mark>An article about computational science</mark> in a scientific publication <mark>is not the scholarship itself, it is merely advertising of the scholarship.</mark> The actual scholarship is the complete software development environment, the complete data and the complete set of instructions which generated the figures. David Donoho (1995) @Goble2012</blockquote>
</div>

<blockquote>A revolution in education and technology transfer follows from the <mark>marriage of word processing and software command scripts</mark>. In this marriage <mark>an author attaches to every figure caption a pushbutton or a name tag usable to recalculate the figure from all its data, parameters, and programs. This provides a concrete definition of reproducibility in computationally oriented research.</mark> -- @Claerbout1992 </mark></blockquote>

----

Replicability, Reproductibility, Repeatability ?

<blockquote> We can reserve the term <mark>Replicability for the regeneration of published results from author-provided code and data.</mark> [...] <mark>Reproducibility is a more general term, implying both replication and the regeneration of findings with at least some independence from the code and/or data associated with the original publication.</mark> Both refer to the analysis that occurs after publication. A third term, <mark>Repeatability</mark>, is sometimes used in place of reproducibility, but this <mark>is more typically used as a term of art referring to the sensitivity of results when underlying measurements are retaken.</mark> -- <b>Victoria Stodden 2011</b></blockquote>

----

@Gent2013, auteur du "Recomputation Manifesto" <br/> <span class="red"><b> Vs </b> </span> <br/> @Drummond2009

<blockquote>Drummond argues powerfully that this - which he calls ‘replicability’ - is the poor cousin of ‘reproducibility’, where experiments are reproduced with changes to factors believed to be insignificant. There is no question that key advances in science should be reproducible in Drummond’s richer sense, but neither do I accept that “the impoverished version, replicability, is one not worth having” -- @Gent2013 </blockquote>

----

<q> Faire le point sur la réplication des modèles de simulations dans le contexte plus large des débats et <span class="red">des outils</span> proposés pour assurer une recherche reproductible</q>

## Des idéaux

<blockquote> <b>OpenNotebook</b> ... there is a <mark>URL to a laboratory notebook</mark> that is freely available and indexed on common search engines. It does not necessarily have to look like a paper notebook but <mark>it is essential that all of the information available to the researchers to make their conclusions is equally available to the rest of the world </mark> -- @Bradley2006 </blockquote>

<blockquote> <b>Litterate programming</b> Je crois que le temps est venu pour une amélioration significative de la documentation des programmes, et que le meilleur moyen d'y arriver est de <mark>considérer les programmes comme des œuvres littéraires</mark>. D'où mon titre, « programmation lettrée ». Nous devons changer notre attitude traditionnelle envers la construction des programmes : <mark>au lieu de considérer que notre tâche principale est de dire à un ordinateur ce qu'il doit faire, appliquons-nous plutôt à expliquer à des êtres humains ce que nous voulons que l'ordinateur fasse.</mark> -- @Knuth1984 </blockquote>

<!---
- Pour les journaux (BOAI, HowOpenIsIt, etc.)
- Pour les institutions (Horizon2020, NSF 2014, Royal Society Science, etc.)
- Pour les disciplines : Psychoterapy (James Coyne), 
--->

- Pour les codes informatiques : 
  - Science Code Manifesto (Barnes 2011)
  - The recomputation manifesto (Gent, Ian P 2013)

## Des outils 

- Des communautées > des outils > des <span color ="red"> innovations </span>

- Un support d'échange privilégié, le navigateur internet

- Une multiplicité d'outils
  - Ecriture collaborative 
  - Dissimination (papiers, données, codes sources)
  
- Des langages clef
  - R (Sweave, Knitr, Rmarkdown)
  - Python (Ipython)

# L'exemple des papier dynamiques avec R

## R interactif 

ggvis ou shiny

```{r ggvis,echo=FALSE}
library(ggvis)
mtcars %>%
  ggvis(~wt, ~mpg) %>%
  layer_smooths(span = input_slider(0.5, 1, value = 1)) %>%
  layer_points(size := input_slider(100, 1000, value = 100))

```

## Python reproductible 

```{r engine="python",echo=FALSE}
from mpl_toolkits.mplot3d import Axes3D
import matplotlib.pyplot as plt
import numpy as np

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')
for c, z in zip(['r', 'g', 'b', 'y'], [30, 20, 10, 0]):
  xs = np.arange(20)
  ys = np.random.rand(20)

# You can provide either a single color or an array. To demonstrate this,
# the first bar of each set will be colored cyan.
cs = [c] * len(xs)
cs[0] = 'c'
ax.bar(xs, ys, zs=z, zdir='y', color=cs, alpha=0.8)

ax.set_xlabel('X')
ax.set_ylabel('Y')
ax.set_zlabel('Z')

plt.savefig("somefilename.png")
```

```{r showfig,include=TRUE,echo=FALSE, results='asis'} 
cat("![figure](./somefilename.png)")
```

## Format et rendu 

<div class="centered">
<img src="presentation-images/capture_format.png"  style="width: 70%;"/>
</div>


# Simulation

----

<q> Faire le point sur <span class= "red" > la réplication des modèles de simulations </span>  dans le contexte plus large des débats et des outils proposés pour assurer une recherche reproductible</q>

---- 

Plusieurs approches, et plusieurs termes

<blockquote>Though many conceptions of replication may exist, for the purposes of this paper, we will define <mark>replication as the implementation (replicated model)</mark> by one scientist or group of scientists (model replicaters) <mark> of a conceptual model described and already implemented (original model) </mark> by a scientist or group of scientists <mark>at a previous time (model builders).</mark> -- @Wilensky2007a</blockquote>

<blockquote>This paper develops the concepts and methods of a process we will call <mark>"alignment of computational models" or "docking" for short</mark>. <mark>Alignment is needed to determine whether two models can produce the same results</mark>, which in turn is the basis for critical experiments and for tests of whether one model can subsume another. -- @Axtell1996</blockquote>

<blockquote>Computing independent <mark>replications</mark> in the NetLogo platform <mark>means initializing the seed of the pseudo-random number generator with different values prior to each run</mark>. -- @Reuillon2013</blockquote>

----

<div class="centered">
Docking et Replication<br/>
<img src="presentation-images/docking_replication_synthese.png"  style="width: 70%;"/>
</div>


## Un état des lieux des pratiques  

<blockquote><mark>The sad fact is that new simulations are produced all the time, but rarely does any one stop to replicate the results of any one else’s simulation model.</mark> -- @Axelrod1997</mark></blockquote>

<blockquote>However, <mark>despite this plethora of interesting models, they are rarely compared, built-on or transferred between researchers.</mark> It would seem there is a dearth of "model-to-model" analysis.<mark> Rather researchers tend to work in isolation, designing all their models from scratch and reporting their results without anyone else reproducing what they found. </mark> -- @Hales2003 </blockquote>

<blockquote>Recent years have seen a proliferation of agent-based models in the natural and social sciences. <mark>But with the exception of a few "classic" models, most of these models have never been replicated by anyone but the original developer.</mark> -- @Wilensky2007a</blockquote>

## Un état des lieux des pratiques  

<!---
Liens : http://cfpm.org/m2m/, http://www.insisoc.org/ESSA04/M2M2.htm, http://m2m2007.hutton.ac.uk/m2m_programme.html
--->

<b> a) Model-to-Model series of workshops 2003 - 2008 </b>

- M2M-1 @Hales2003 <span class="green">(Marseille 2003)</span>
- M2M-2 <span class="green">(Valladolid 2004)</span>
- M2M-3 @Rouchier2008 <span class="green">(Marseille 2007)</span>

=> <span class = "red">mais fin des workshop ... </span> selon @Rouchier2013

<b> b) Réseau RNSC Maps 2009 - 2014 </b>

- 7 Workshops (formation, réplication, conférences)
- Publication fiche pédagogique (2015)

etc.

----

<div class="centered">
Survey de @Heath2009 <br/>
<img src="presentation-images/validation_pourcentage_2009.png"  style="width: 70%;"/>
</div>

## Quel bénéfices ?

Reflexion OSullivan, Rouchier 2013, Squazoni2010, etc.

## Quels objets de recherche ?

Le code source, reflet d'un processus de reflexion 

<blockquote> Pour @Langlois2005  <mark>Le terme de modélisation désigne à la fois l'activité pour produire un modèle et le résultat de cette activité.</mark> Le concept de modélisation est donc <mark>[...] plus large que celui de modèle, car il recouvre l'activité humaine qui aboutit au modèle achevé, alors que le modèle est un objet (concret ou abstrait), volontairement dépouillé de l'activité qui l'a créé.</mark> </blockquote>

Deux niveaux à prendre en compte : 

- Simulation(s) de modèle
- Exploration(s) de simulation 

## Exemple avec RNetlogo 

R Netlogo, un outil puissant pour générer des rapports dynamique auto-suffisant.

## Quelles contraintes ?

- déposer les données
- déposer les codes sources
- déposer le(s) papier(s) support des expériences

Est ce suffisant ? => Non, en réalité le problème est beaucoup plus complexe !

## Ecosystèmes

- Machine virtuelle
- Suivi et empaquetage de dépendance (packrat, etc.)
- Workflows

# References {.smaller}

